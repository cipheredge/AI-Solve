<!doctype html><html lang=en-us x-data :class=$store.darkMode.class() :data-theme=$store.darkMode.theme()><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>MCP Database Service: Architecture Design and Release Practices | AI Collector</title>
<link href=/favicon.ico rel=icon type=image/x-icon><link rel=canonical href=https://jiejue.ai/2025/02/mcp-dbutils-deep-dive/><meta name=author content="Dong Hao"><meta name=description content="This article delves deep into the design philosophy of the MCP database service and the complete process of developing and releasing an MCP service. For developers interested in MCP service development or currently building their own MCP services, the experiences shared here might be helpful.
"><meta name=keywords content><meta name=generator content="Hugo 0.144.2"><meta property="og:url" content="https://jiejue.ai/2025/02/mcp-dbutils-deep-dive/"><meta property="og:site_name" content="AI Collector"><meta property="og:title" content="MCP Database Service: Architecture Design and Release Practices"><meta property="og:description" content="This article delves deep into the design philosophy of the MCP database service and the complete process of developing and releasing an MCP service. For developers interested in MCP service development or currently building their own MCP services, the experiences shared here might be helpful."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-02-09T21:33:00+04:00"><meta property="article:modified_time" content="2025-02-21T10:56:16+05:30"><meta name=twitter:card content="summary"><meta name=twitter:title content="MCP Database Service: Architecture Design and Release Practices"><meta name=twitter:description content="This article delves deep into the design philosophy of the MCP database service and the complete process of developing and releasing an MCP service. For developers interested in MCP service development or currently building their own MCP services, the experiences shared here might be helpful."><link rel=stylesheet href=/css/output.min.css><style>pre{padding:1em;overflow:auto}</style><script defer src=https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js></script></head><body x-data="{
    flip: false,
  }"><div id=dream-global-bg></div><nav x-data="{ isSticky: false }" x-init="window.addEventListener('scroll', () => { isSticky = window.scrollY > 30 })" class="sticky top-0 z-30 mt-4 lg:mt-8 py-4" :class="{ 'bg-base-100 shadow-lg dark:border-b dark:border-base-content/30': isSticky }"><div class="container flex justify-between px-4"><section class="flex items-center gap-4"><div class="avatar cursor-pointer hover:online" @click="flip = !flip" title="Flip it!"><div class="h-10 rounded-full"><img src=/favicon.ico alt="AI Collector"></div></div><div><a href=https://jiejue.ai/ class="text-lg font-semibold cursor-pointer">AI Collector</a><div class="text-base-content/60 text-sm">Using AI to Serve People</div></div></section><div class="dropdown dropdown-end sm:hidden"><div tabindex=0 role=button class="btn btn-ghost btn-square" aria-label="Select an option"><ion-icon name=menu class=text-2xl></ion-icon></div><ul tabindex=0 class="dropdown-content menu w-36 bg-base-100 rounded-box z-[1] shadow-md"><li><a class="inline-flex items-center p-2 cursor-pointer" href=/index.xml title=RSS><ion-icon name=logo-rss></ion-icon>RSS</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/posts title=Archives><ion-icon name=archive></ion-icon>Archives</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/tags title="All Tags"><ion-icon name=pricetags></ion-icon>All Tags</a></li></ul></div><section class="hidden sm:flex sm:items-center sm:gap-2 md:gap-4"><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=/index.xml title=RSS><ion-icon class=group-hover:text-primary-content name=logo-rss></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=/posts title=Archives><ion-icon class=group-hover:text-primary-content name=archive></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=/tags title="All Tags"><ion-icon class=group-hover:text-primary-content name=pricetags></ion-icon></a></section></div></nav><div class=flip-container :class="{ 'flip-it': flip }"><div class=flipper><div class=front><div class=container><div class="lg:grid lg:grid-cols-4 gap-4 mt-4 px-4"><div class="hidden lg:block"></div><div class=lg:col-span-2><article class="mx-auto prose prose-quoteless dark:prose-invert" id=dream-single-post-main itemscope itemtype=http://schema.org/Article><meta itemprop=name content="MCP Database Service: Architecture Design and Release Practices"><meta itemprop=description content="This article delves deep into the design philosophy of the MCP database service and the complete process of developing and releasing an MCP service. For developers interested in MCP service development or currently building their own MCP services, the experiences shared here might be helpful."><meta itemprop=datePublished content="2025-02-09T21:33:00+04:00"><meta itemprop=dateModified content="2025-02-21T10:56:16+05:30"><meta itemprop=wordCount content="501"><header><h1 itemprop=headline>MCP Database Service: Architecture Design and Release Practices</h1><p class=text-sm><span data-format=luxon>2025-02-09T21:33:00+04:00</span>
| <span>3 minute read</span>
| <span>Updated at
<span data-format=luxon>2025-02-21T10:56:16+05:30</span></span></p><div class="flex justify-between"><div class="flex items-center"><span>@</span>
<span itemprop=author itemscope itemtype=https://schema.org/Person><span itemprop=name>Dong Hao</span></span></div><div class="flex items-center gap-2"><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://x.com/intent/post?text=MCP%20Database%20Service:%20Architecture%20Design%20and%20Release%20Practices&amp;url=https://jiejue.ai/2025/02/mcp-dbutils-deep-dive/" target=_blank rel="noopener noreferrer" title="Share on X"><ion-icon class=group-hover:text-primary-content name=logo-x></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://facebook.com/sharer/sharer.php?u=https://jiejue.ai/2025/02/mcp-dbutils-deep-dive/" target=_blank rel="noopener noreferrer" title="Share on Facebook"><ion-icon class=group-hover:text-primary-content name=logo-facebook></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://wa.me/?text=MCP%20Database%20Service:%20Architecture%20Design%20and%20Release%20Practices%20https://jiejue.ai/2025/02/mcp-dbutils-deep-dive/" target=_blank rel="noopener noreferrer" title="Share on WhatsApp"><ion-icon class=group-hover:text-primary-content name=logo-whatsapp></ion-icon></a></div></div></header><section id=dream-single-post-content itemprop=articleBody><img src=https://jiejue.obs.ap-southeast-1.myhuaweicloud.com/20250209213924711.webp alt="MCP Database Service: Architecture Design and Release Practices"><p>This article delves deep into the design philosophy of the MCP database service and the complete process of developing and releasing an MCP service. For developers interested in MCP service development or currently building their own MCP services, the experiences shared here might be helpful.</p><h2 id=architecture-design>Architecture Design</h2><h3 id=abstraction-layer-design>Abstraction Layer Design</h3><pre class=mermaid>graph TD
  Client[Client] --> DatabaseServer[Database Server]
  subgraph MCP Server
    DatabaseServer
    DatabaseHandler[Database Handler]
    PostgresHandler[PostgreSQL Handler]
    SQLiteHandler[SQLite Handler]
    DatabaseServer --> DatabaseHandler
    DatabaseHandler --> PostgresHandler
    DatabaseHandler --> SQLiteHandler
  end
  PostgresHandler --> PostgreSQL[(PostgreSQL)]
  SQLiteHandler --> SQLite[(SQLite)]</pre><p>The abstraction layer is the core of the entire service, addressing these key issues:</p><ol><li><strong>Interface Unification:</strong> Through the DatabaseHandler abstract base class, defining a unified interface ensures all database implementations follow the same API specifications.</li><li><strong>Implementation Isolation:</strong> Specific database implementations (like PostgreSQL and SQLite) are independent, making it easy to add support for new databases.</li><li><strong>Flexible Configuration:</strong> Runtime configuration and specific implementations are separated, supporting dynamic database switching without code modifications.</li></ol><h3 id=release-process>Release Process</h3><pre class=mermaid>sequenceDiagram
    participant D as Developer
    participant G as GitHub
    participant A as Actions
    participant P as PyPI
    
    D->>G: Push code
    D->>G: Create tag (v0.2.4)
    G->>A: Trigger workflow
    A->>A: Build package
    A->>P: Publish to PyPI
    Note over P: Version release complete</pre><p>Evolution from v0.1.0 to v0.2.4:</p><ol><li><p>v0.1.0: Initial PostgreSQL Implementation</p><ul><li>Basic query functionality</li><li>Connection pool management</li><li>Error handling</li></ul></li><li><p>v0.2.0: Architecture Reorganization</p><ul><li>Project renamed to mcp-dbutils</li><li>Introduction of abstraction layer design</li><li>Improved configuration management</li></ul></li><li><p>v0.2.1: SQLite Support</p><ul><li>Added SQLite basic functionality</li><li>Unified error handling</li><li>URI connection support</li></ul></li><li><p>v0.2.2-v0.2.4: Continuous Improvements</p><ul><li>Enhanced documentation</li><li>Improved configuration experience</li><li>Added automated release</li></ul></li></ol><h3 id=automated-release-process>Automated Release Process</h3><p>GitHub Actions configuration example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Publish to PyPI</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>release</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>types</span>: [<span style=color:#ae81ff>published]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>publish</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>: <span style=color:#ae81ff>pypi</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>permissions</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>id-token</span>: <span style=color:#ae81ff>write</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v4</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>astral-sh/setup-uv@v4</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>enable-cache</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build and Publish</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          uv python install
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          uv sync --all-extras
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          uv build
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          uv publish</span>
</span></span></code></pre></div><p>Key points explained:</p><ol><li>Using <code>setup-uv</code> instead of traditional pip for faster installation</li><li>Enabling trusted publishing for enhanced security</li><li>Automated build and release process</li></ol><h2 id=best-practices>Best Practices</h2><h3 id=version-management>Version Management</h3><ol><li><p>Semantic Versioning</p><ul><li>MAJOR.MINOR.PATCH format</li><li>Increment MAJOR for breaking changes</li><li>Increment MINOR for new features</li><li>Increment PATCH for fixes</li></ul></li><li><p>Changelog Maintenance</p><ul><li>Use consistent format</li><li>Sort by version number in descending order</li><li>Categorize entries (Added/Changed/Fixed)</li></ul></li></ol><h3 id=release-process-1>Release Process</h3><ol><li><p>Code Preparation</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Update version number</span>
</span></span><span style=display:flex><span>edit pyproject.toml
</span></span><span style=display:flex><span><span style=color:#75715e># Update CHANGELOG</span>
</span></span><span style=display:flex><span>edit CHANGELOG.md
</span></span><span style=display:flex><span><span style=color:#75715e># Commit changes</span>
</span></span><span style=display:flex><span>git add .
</span></span><span style=display:flex><span>git commit -m <span style=color:#e6db74>&#34;chore: bump version to x.y.z&#34;</span>
</span></span></code></pre></div></li><li><p>Create Release</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create tag</span>
</span></span><span style=display:flex><span>git tag vx.y.z
</span></span><span style=display:flex><span>git push origin vx.y.z
</span></span></code></pre></div></li><li><p>Automated Release</p><ul><li>GitHub Actions triggers automatically</li><li>PyPI updates automatically</li><li>Users can immediately use the new version</li></ul></li></ol><h3 id=documentation-maintenance>Documentation Maintenance</h3><p>Good documentation should include:</p><ol><li>Detailed installation instructions</li><li>Configuration file examples</li><li>Basic usage tutorials</li><li>API documentation</li><li>Architecture explanation</li><li>Contribution guidelines</li></ol><h2 id=future-outlook>Future Outlook</h2><ol><li><p>Database Support Extension</p><ul><li>MongoDB support</li><li>Redis support</li><li>More relational databases</li></ul></li><li><p>Feature Enhancements</p><ul><li>Query result caching</li><li>More database operations (within security limits)</li><li>Performance monitoring</li></ul></li><li><p>Tool Improvements</p><ul><li>Enhanced command-line tools</li><li>Configuration validation tools</li><li>Developer debugging tools</li></ul></li></ol><p>Continuous iteration and improvement are key to project success. Through standardized release processes and comprehensive documentation, we can better maintain and develop this MCP service.</p></section><div class=divider></div><div class="flex flex-col md:flex-row justify-between gap-4 py-4"><a class="group btn btn-outline" href=/2025/02/regexp-advanced-features/ title="Exploring Advanced Regular Expression Features: From ripgrep to PCRE2"><ion-icon name=chevron-back></ion-icon><div class="inline-flex flex-col items-start"><span class="text-base-content/60 group-hover:text-neutral-content/60 text-xs font-normal">Previous page</span>
<span class="max-w-48 truncate">Exploring Advanced Regular Expression Features: From ripgrep to PCRE2</span></div></a><a class="group btn btn-outline" href=/2025/02/mcp-dbutils-quick-guide/ title="MCP Database Service: Easily Manage Multiple Databases"><div class="inline-flex flex-col items-end"><span class="text-base-content/60 group-hover:text-neutral-content/60 text-xs font-normal">Next page</span>
<span class="max-w-48 truncate">MCP Database Service: Easily Manage Multiple Databases</span></div><ion-icon name=chevron-forward></ion-icon></a></div></article></div><div class="hidden lg:flex lg:flex-col lg:items-end"><nav id=TableOfContents><ul><li><a href=#architecture-design>Architecture Design</a><ul><li><a href=#abstraction-layer-design>Abstraction Layer Design</a></li><li><a href=#release-process>Release Process</a></li><li><a href=#automated-release-process>Automated Release Process</a></li></ul></li><li><a href=#best-practices>Best Practices</a><ul><li><a href=#version-management>Version Management</a></li><li><a href=#release-process-1>Release Process</a></li><li><a href=#documentation-maintenance>Documentation Maintenance</a></li></ul></li><li><a href=#future-outlook>Future Outlook</a></li></ul></nav></div></div><footer class="flex justify-between items-center gap-2 px-4 py-12"><div><p>© 2025 AI Collector</p><p>Silicon-based Life Kindergarten</p></div><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><section><span id=busuanzi_container_value_site_pv><i class="far fa-eye fa-fw"></i>
Site Total Visits <span id=busuanzi_value_site_pv></span>
</span>&nbsp;|&nbsp;
<span id=busuanzi_container_value_site_uv><i class="fa fa-user"></i>
Site Visitor Count <span id=busuanzi_value_site_uv></span></span></section></span></section></script><div x-data="{ icons: [
    { name: 'moon', status: 'y' },
    { name: 'sunny', status: 'n' },
    { name: 'desktop', status: 'auto' }
  ] }" class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"><template x-for="icon in icons"><div role=button tabindex=0 :aria-label="'Select ' + icon.name + ' mode'" class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary" :class="$store.darkMode.icon() === icon.name && 'bg-primary'" @click=$store.darkMode.toggle(icon.status)><ion-icon :name="`${icon.name}-outline`" class=group-hover:text-primary-content :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"></ion-icon></div></template></div></footer></div></div><div class=back><div class=container><div class="dream-grid dream-grid-about"></div><footer class="flex justify-between items-center gap-2 px-4 py-12"><div><p>© 2025 AI Collector</p><p>Silicon-based Life Kindergarten</p></div><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><section><span id=busuanzi_container_value_site_pv><i class="far fa-eye fa-fw"></i>
Site Total Visits <span id=busuanzi_value_site_pv></span>
</span>&nbsp;|&nbsp;
<span id=busuanzi_container_value_site_uv><i class="fa fa-user"></i>
Site Visitor Count <span id=busuanzi_value_site_uv></span></span></section></span></section></script><div x-data="{ icons: [
    { name: 'moon', status: 'y' },
    { name: 'sunny', status: 'n' },
    { name: 'desktop', status: 'auto' }
  ] }" class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"><template x-for="icon in icons"><div role=button tabindex=0 :aria-label="'Select ' + icon.name + ' mode'" class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary" :class="$store.darkMode.icon() === icon.name && 'bg-primary'" @click=$store.darkMode.toggle(icon.status)><ion-icon :name="`${icon.name}-outline`" class=group-hover:text-primary-content :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"></ion-icon></div></template></div></footer></div></div></div></div><script>window.lightTheme="emerald",window.darkTheme="forest"</script><script src=https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin=anonymous></script><script src=/js/grid.min.js></script><script src=/js/main.min.js></script><script src=https://cdn.jsdelivr.net/npm/luxon@1.26.0 integrity="sha256-4sbTzmCCW9LGrIh5OsN8V5Pfdad1F1MwhLAOyXKnsE0=" crossorigin=anonymous></script><script>format();function format(){document.querySelectorAll('span[data-format="luxon"]').forEach(e=>{const t=e.textContent;e.textContent=luxon.DateTime.fromISO(t,{locale:"en"}).toFormat("yyyy-MM-dd HH:mm")})}</script><script type=module>
      import mediumZoom from 'https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/+esm';
      mediumZoom('#dream-single-post-content img')
    </script><script type=module>
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
      </script><script async src="https://www.googletagmanager.com/gtag/js?id=G-S0KCH9BW4F"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-S0KCH9BW4F")}</script><script type=module src=https://unpkg.com/ionicons@7.4.0/dist/ionicons/ionicons.esm.js></script><script nomodule src=https://unpkg.com/ionicons@7.4.0/dist/ionicons/ionicons.js></script></body></html>