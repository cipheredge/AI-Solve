<!doctype html><html lang=en-us x-data :class=$store.darkMode.class() :data-theme=$store.darkMode.theme()><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Git Rescue: How to Separate a File from Your Recent Commit | AI Collector</title>
<link href=/favicon.ico rel=icon type=image/x-icon><link rel=canonical href=https://jiejue.ai/2025/02/git-rescue-wrong-commit/><meta name=author content="Dong Hao"><meta name=description content="John recently worked on a new feature and just committed some code. After committing, he suddenly realized that he accidentally included an unfinished configuration file in the commit. He wants to separate this file from the recent commit and commit it separately. How should he do this?
"><meta name=keywords content><meta name=generator content="Hugo 0.144.2"><meta property="og:url" content="https://jiejue.ai/2025/02/git-rescue-wrong-commit/"><meta property="og:site_name" content="AI Collector"><meta property="og:title" content="Git Rescue: How to Separate a File from Your Recent Commit"><meta property="og:description" content="John recently worked on a new feature and just committed some code. After committing, he suddenly realized that he accidentally included an unfinished configuration file in the commit. He wants to separate this file from the recent commit and commit it separately. How should he do this?"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-02-15T18:02:12+04:00"><meta property="article:modified_time" content="2025-02-21T10:56:16+05:30"><meta name=twitter:card content="summary"><meta name=twitter:title content="Git Rescue: How to Separate a File from Your Recent Commit"><meta name=twitter:description content="John recently worked on a new feature and just committed some code. After committing, he suddenly realized that he accidentally included an unfinished configuration file in the commit. He wants to separate this file from the recent commit and commit it separately. How should he do this?"><link rel=stylesheet href=/css/output.min.css><style>pre{padding:1em;overflow:auto}</style><script defer src=https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js></script></head><body x-data="{
    flip: false,
  }"><div id=dream-global-bg></div><nav x-data="{ isSticky: false }" x-init="window.addEventListener('scroll', () => { isSticky = window.scrollY > 30 })" class="sticky top-0 z-30 mt-4 lg:mt-8 py-4" :class="{ 'bg-base-100 shadow-lg dark:border-b dark:border-base-content/30': isSticky }"><div class="container flex justify-between px-4"><section class="flex items-center gap-4"><div class="avatar cursor-pointer hover:online" @click="flip = !flip" title="Flip it!"><div class="h-10 rounded-full"><img src=/favicon.ico alt="AI Collector"></div></div><div><a href=https://jiejue.ai/ class="text-lg font-semibold cursor-pointer">AI Collector</a><div class="text-base-content/60 text-sm">Using AI to Serve People</div></div></section><div class="dropdown dropdown-end sm:hidden"><div tabindex=0 role=button class="btn btn-ghost btn-square" aria-label="Select an option"><ion-icon name=menu class=text-2xl></ion-icon></div><ul tabindex=0 class="dropdown-content menu w-36 bg-base-100 rounded-box z-[1] shadow-md"><li><a class="inline-flex items-center p-2 cursor-pointer" href=/index.xml title=RSS><ion-icon name=logo-rss></ion-icon>RSS</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/posts title=Archives><ion-icon name=archive></ion-icon>Archives</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/tags title="All Tags"><ion-icon name=pricetags></ion-icon>All Tags</a></li></ul></div><section class="hidden sm:flex sm:items-center sm:gap-2 md:gap-4"><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=/index.xml title=RSS><ion-icon class=group-hover:text-primary-content name=logo-rss></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=/posts title=Archives><ion-icon class=group-hover:text-primary-content name=archive></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=/tags title="All Tags"><ion-icon class=group-hover:text-primary-content name=pricetags></ion-icon></a></section></div></nav><div class=flip-container :class="{ 'flip-it': flip }"><div class=flipper><div class=front><div class=container><div class="lg:grid lg:grid-cols-4 gap-4 mt-4 px-4"><div class="hidden lg:block"></div><div class=lg:col-span-2><article class="mx-auto prose prose-quoteless dark:prose-invert" id=dream-single-post-main itemscope itemtype=http://schema.org/Article><meta itemprop=name content="Git Rescue: How to Separate a File from Your Recent Commit"><meta itemprop=description content="John recently worked on a new feature and just committed some code. After committing, he suddenly realized that he accidentally included an unfinished configuration file in the commit. He wants to separate this file from the recent commit and commit it separately. How should he do this?"><meta itemprop=datePublished content="2025-02-15T18:02:12+04:00"><meta itemprop=dateModified content="2025-02-21T10:56:16+05:30"><meta itemprop=wordCount content="614"><header><h1 itemprop=headline>Git Rescue: How to Separate a File from Your Recent Commit</h1><p class=text-sm><span data-format=luxon>2025-02-15T18:02:12+04:00</span>
| <span>3 minute read</span>
| <span>Updated at
<span data-format=luxon>2025-02-21T10:56:16+05:30</span></span></p><div class="flex justify-between"><div class="flex items-center"><span>@</span>
<span itemprop=author itemscope itemtype=https://schema.org/Person><span itemprop=name>Dong Hao</span></span></div><div class="flex items-center gap-2"><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://x.com/intent/post?text=Git%20Rescue:%20How%20to%20Separate%20a%20File%20from%20Your%20Recent%20Commit&amp;url=https://jiejue.ai/2025/02/git-rescue-wrong-commit/" target=_blank rel="noopener noreferrer" title="Share on X"><ion-icon class=group-hover:text-primary-content name=logo-x></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://facebook.com/sharer/sharer.php?u=https://jiejue.ai/2025/02/git-rescue-wrong-commit/" target=_blank rel="noopener noreferrer" title="Share on Facebook"><ion-icon class=group-hover:text-primary-content name=logo-facebook></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://wa.me/?text=Git%20Rescue:%20How%20to%20Separate%20a%20File%20from%20Your%20Recent%20Commit%20https://jiejue.ai/2025/02/git-rescue-wrong-commit/" target=_blank rel="noopener noreferrer" title="Share on WhatsApp"><ion-icon class=group-hover:text-primary-content name=logo-whatsapp></ion-icon></a></div></div></header><section id=dream-single-post-content itemprop=articleBody><img src=https://jiejue.obs.ap-southeast-1.myhuaweicloud.com/20250215180523878.webp alt="Git Rescue: How to Separate a File from Your Recent Commit"><p>John recently worked on a new feature and just committed some code. After committing, he suddenly realized that he accidentally included an unfinished configuration file in the commit. He wants to separate this file from the recent commit and commit it separately. How should he do this?</p><h2 id=background>Background</h2><p>This scenario is quite common:</p><ul><li>You just used <code>git commit</code> to commit a batch of files</li><li>Suddenly you realize one of the files shouldn&rsquo;t have been committed with the others</li><li>You want to take this file out of the recent commit and commit it separately</li></ul><p>For example:</p><ul><li>A configuration file should be committed separately for easier rollback later</li><li>Test code for a new feature should be committed separately from the implementation</li><li>You accidentally committed experimental code along with production code</li></ul><h2 id=solution>Solution</h2><p>Let me show you a method that&rsquo;s both safe and preserves commit information.</p><h3 id=step-1-create-a-backup-branch-just-in-case>Step 1: Create a Backup Branch (Just in Case)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fish data-lang=fish><span style=display:flex><span><span style=color:#a6e22e>git</span> branch tmp-backup
</span></span></code></pre></div><p>This step isn&rsquo;t mandatory, but it&rsquo;s highly recommended to develop this habit. If something goes wrong with the following operations, you can always return to this backup.</p><h3 id=step-2-start-modifying-the-recent-commit>Step 2: Start Modifying the Recent Commit</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fish data-lang=fish><span style=display:flex><span><span style=color:#a6e22e>git</span> rebase <span style=color:#a6e22e>-i</span> HEAD<span style=color:#f92672>^</span>
</span></span></code></pre></div><p>This will open an editor where you&rsquo;ll see your most recent commit. Change the <code>pick</code> at the beginning to <code>edit</code>, then save and exit.</p><pre tabindex=0><code class=language-git data-lang=git>edit a3a4837 fix: update handlers to use custom exceptions
pick 3802508 fix: fix logging and variable initialization
pick aae0dbd fix: fix logger function calls
pick eb07cc8 test: update test cases for custom exceptions
pick 62ef260 docs: update changelog for v0.2.9
</code></pre><h3 id=step-3-separate-the-file>Step 3: Separate the File</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fish data-lang=fish><span style=display:flex><span><span style=color:#75715e># Remove the file to be separated from the current commit
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>git</span> reset HEAD<span style=color:#f92672>^</span> filename-to-separate
</span></span><span style=display:flex><span><span style=color:#75715e># Update the original commit (now without that file)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>git</span> commit <span style=color:#a6e22e>--amend</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create a new commit containing only the separated file
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>git</span> add filename-to-separate
</span></span><span style=display:flex><span><span style=color:#a6e22e>git</span> commit <span style=color:#a6e22e>-m</span> <span style=color:#e6db74>&#34;new commit message&#34;</span>
</span></span></code></pre></div><h3 id=step-4-complete-the-modification>Step 4: Complete the Modification</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fish data-lang=fish><span style=display:flex><span><span style=color:#a6e22e>git</span> rebase <span style=color:#a6e22e>--continue</span>
</span></span></code></pre></div><h3 id=step-5-delete-backup-after-confirmation-optional>Step 5: Delete Backup After Confirmation (Optional)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fish data-lang=fish><span style=display:flex><span><span style=color:#a6e22e>git</span> branch <span style=color:#a6e22e>-D</span> tmp-backup
</span></span></code></pre></div><h2 id=real-example>Real Example</h2><p>Let&rsquo;s understand this process through a specific example:</p><p>Suppose John is developing a website and he just committed these files:</p><ul><li><code>index.html</code> (main page update)</li><li><code>style.css</code> (style modifications)</li><li><code>config.dev.json</code> (development environment configuration)</li></ul><p>After committing, he realizes that <code>config.dev.json</code> should be committed separately because this configuration file might need to be rolled back independently in the future.</p><pre class=mermaid>graph TB
    A[Original Commit<br>contains three files] --> B{Use rebase<br>enter edit mode}
    B --> C[Remove config file]
    C --> D[Update original commit]
    C --> E[Create new commit<br>with config file only]
    D --> F[Complete rebase]
    E --> F</pre><h2 id=important-notes>Important Notes</h2><ol><li><p>Before starting, ensure:</p><ul><li>Your working directory is clean (no uncommitted changes)</li><li>You&rsquo;re certain about modifying the most recent commit</li></ul></li><li><p>In some cases, the order of separating files is important:</p><ul><li>For configuration files, commit the base configuration first, then the code that uses it</li><li>For test files, commit the code being tested first, then the test cases</li></ul></li></ol><h2 id=preventive-measures>Preventive Measures</h2><p>The best solution is actually prevention: spend a little more time checking files before committing. You can:</p><ol><li>Use <code>git status</code> to review the list of files to be committed</li><li>Be careful when selecting files with <code>git add</code>, instead of using <code>git add .</code></li><li>Use <code>git diff --cached</code> for a final confirmation before <code>git commit</code></li></ol><h2 id=tips>Tips</h2><p>Developing good habits is important. If you find that your changes can be divided into independent parts (like &ldquo;bug fix&rdquo; and &ldquo;new feature&rdquo;), it&rsquo;s better to commit them separately during development rather than splitting them up later.</p><p>Remember: Good code commits should be like telling a story, where each commit is an independent, meaningful chapter. This not only makes it easier to review history later but also makes it convenient to roll back specific changes when needed.</p></section><div class=divider></div><div class="flex flex-col md:flex-row justify-between gap-4 py-4"><a class="group btn btn-outline" href=/2025/02/git-modify-history-commit/ title="The Secret of Git History Modification: How to Elegantly Rewrite Past Commits"><ion-icon name=chevron-back></ion-icon><div class="inline-flex flex-col items-start"><span class="text-base-content/60 group-hover:text-neutral-content/60 text-xs font-normal">Previous page</span>
<span class="max-w-48 truncate">The Secret of Git History Modification: How to Elegantly Rewrite Past Commits</span></div></a><a class="group btn btn-outline" href=/2025/02/debug-k8s-ingress-cors-journey/ title="Kubernetes Hands-on: Debugging a CORS Error Journey"><div class="inline-flex flex-col items-end"><span class="text-base-content/60 group-hover:text-neutral-content/60 text-xs font-normal">Next page</span>
<span class="max-w-48 truncate">Kubernetes Hands-on: Debugging a CORS Error Journey</span></div><ion-icon name=chevron-forward></ion-icon></a></div></article></div><div class="hidden lg:flex lg:flex-col lg:items-end"><nav id=TableOfContents><ul><li><a href=#background>Background</a></li><li><a href=#solution>Solution</a><ul><li><a href=#step-1-create-a-backup-branch-just-in-case>Step 1: Create a Backup Branch (Just in Case)</a></li><li><a href=#step-2-start-modifying-the-recent-commit>Step 2: Start Modifying the Recent Commit</a></li><li><a href=#step-3-separate-the-file>Step 3: Separate the File</a></li><li><a href=#step-4-complete-the-modification>Step 4: Complete the Modification</a></li><li><a href=#step-5-delete-backup-after-confirmation-optional>Step 5: Delete Backup After Confirmation (Optional)</a></li></ul></li><li><a href=#real-example>Real Example</a></li><li><a href=#important-notes>Important Notes</a></li><li><a href=#preventive-measures>Preventive Measures</a></li><li><a href=#tips>Tips</a></li></ul></nav></div></div><footer class="flex justify-between items-center gap-2 px-4 py-12"><div><p>© 2025 AI Collector</p><p>Silicon-based Life Kindergarten</p></div><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><section><span id=busuanzi_container_value_site_pv><i class="far fa-eye fa-fw"></i>
Site Total Visits <span id=busuanzi_value_site_pv></span>
</span>&nbsp;|&nbsp;
<span id=busuanzi_container_value_site_uv><i class="fa fa-user"></i>
Site Visitor Count <span id=busuanzi_value_site_uv></span></span></section></span></section></script><div x-data="{ icons: [
    { name: 'moon', status: 'y' },
    { name: 'sunny', status: 'n' },
    { name: 'desktop', status: 'auto' }
  ] }" class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"><template x-for="icon in icons"><div role=button tabindex=0 :aria-label="'Select ' + icon.name + ' mode'" class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary" :class="$store.darkMode.icon() === icon.name && 'bg-primary'" @click=$store.darkMode.toggle(icon.status)><ion-icon :name="`${icon.name}-outline`" class=group-hover:text-primary-content :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"></ion-icon></div></template></div></footer></div></div><div class=back><div class=container><div class="dream-grid dream-grid-about"></div><footer class="flex justify-between items-center gap-2 px-4 py-12"><div><p>© 2025 AI Collector</p><p>Silicon-based Life Kindergarten</p></div><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><section><span id=busuanzi_container_value_site_pv><i class="far fa-eye fa-fw"></i>
Site Total Visits <span id=busuanzi_value_site_pv></span>
</span>&nbsp;|&nbsp;
<span id=busuanzi_container_value_site_uv><i class="fa fa-user"></i>
Site Visitor Count <span id=busuanzi_value_site_uv></span></span></section></span></section></script><div x-data="{ icons: [
    { name: 'moon', status: 'y' },
    { name: 'sunny', status: 'n' },
    { name: 'desktop', status: 'auto' }
  ] }" class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"><template x-for="icon in icons"><div role=button tabindex=0 :aria-label="'Select ' + icon.name + ' mode'" class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary" :class="$store.darkMode.icon() === icon.name && 'bg-primary'" @click=$store.darkMode.toggle(icon.status)><ion-icon :name="`${icon.name}-outline`" class=group-hover:text-primary-content :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"></ion-icon></div></template></div></footer></div></div></div></div><script>window.lightTheme="emerald",window.darkTheme="forest"</script><script src=https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin=anonymous></script><script src=/js/grid.min.js></script><script src=/js/main.min.js></script><script src=https://cdn.jsdelivr.net/npm/luxon@1.26.0 integrity="sha256-4sbTzmCCW9LGrIh5OsN8V5Pfdad1F1MwhLAOyXKnsE0=" crossorigin=anonymous></script><script>format();function format(){document.querySelectorAll('span[data-format="luxon"]').forEach(e=>{const t=e.textContent;e.textContent=luxon.DateTime.fromISO(t,{locale:"en"}).toFormat("yyyy-MM-dd HH:mm")})}</script><script type=module>
      import mediumZoom from 'https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/+esm';
      mediumZoom('#dream-single-post-content img')
    </script><script type=module>
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
      </script><script async src="https://www.googletagmanager.com/gtag/js?id=G-S0KCH9BW4F"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-S0KCH9BW4F")}</script><script type=module src=https://unpkg.com/ionicons@7.4.0/dist/ionicons/ionicons.esm.js></script><script nomodule src=https://unpkg.com/ionicons@7.4.0/dist/ionicons/ionicons.js></script></body></html>