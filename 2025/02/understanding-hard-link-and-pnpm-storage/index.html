<!doctype html><html lang=en-us x-data :class=$store.darkMode.class() :data-theme=$store.darkMode.theme()><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Understanding Hard Links and pnpm's Storage Magic Through Real-Life Scenarios | AI Solve</title>
<link href=/favicon.ico rel=icon type=image/x-icon><link rel=canonical href=https://jiejue.ai/2025/02/understanding-hard-link-and-pnpm-storage/><meta name=author content="Dong Hao"><meta name=description content="Imagine this scenario: You and your roommate share an apartment, and each of you needs a copy of &ldquo;Professional JavaScript&rdquo; for studying. Conventionally, you might each buy a copy — this is like traditional file copying. But what if there was a way to share the same book while each having access to it in your own room? That would save money and be convenient, right? This is the concept behind Hard Links.
And pnpm, an increasingly popular package manager, uses similar wisdom to save disk space. Let&rsquo;s understand this seemingly complex technical concept through this article in a simple way.
"><meta name=keywords content><meta name=generator content="Hugo 0.144.2"><meta property="og:url" content="https://jiejue.ai/2025/02/understanding-hard-link-and-pnpm-storage/"><meta property="og:site_name" content="AI Solve"><meta property="og:title" content="Understanding Hard Links and pnpm's Storage Magic Through Real-Life Scenarios"><meta property="og:description" content="Imagine this scenario: You and your roommate share an apartment, and each of you needs a copy of “Professional JavaScript” for studying. Conventionally, you might each buy a copy — this is like traditional file copying. But what if there was a way to share the same book while each having access to it in your own room? That would save money and be convenient, right? This is the concept behind Hard Links.
And pnpm, an increasingly popular package manager, uses similar wisdom to save disk space. Let’s understand this seemingly complex technical concept through this article in a simple way."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-02-16T02:08:22+04:00"><meta property="article:modified_time" content="2025-02-21T10:56:16+05:30"><meta name=twitter:card content="summary"><meta name=twitter:title content="Understanding Hard Links and pnpm's Storage Magic Through Real-Life Scenarios"><meta name=twitter:description content="Imagine this scenario: You and your roommate share an apartment, and each of you needs a copy of “Professional JavaScript” for studying. Conventionally, you might each buy a copy — this is like traditional file copying. But what if there was a way to share the same book while each having access to it in your own room? That would save money and be convenient, right? This is the concept behind Hard Links.
And pnpm, an increasingly popular package manager, uses similar wisdom to save disk space. Let’s understand this seemingly complex technical concept through this article in a simple way."><link rel=stylesheet href=/css/output.min.css><style>pre{padding:1em;overflow:auto}</style><script defer src=https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js></script></head><body x-data="{
    flip: false,
  }"><div id=dream-global-bg></div><nav x-data="{ isSticky: false }" x-init="window.addEventListener('scroll', () => { isSticky = window.scrollY > 30 })" class="sticky top-0 z-30 mt-4 lg:mt-8 py-4" :class="{ 'bg-base-100 shadow-lg dark:border-b dark:border-base-content/30': isSticky }"><div class="container flex justify-between px-4"><section class="flex items-center gap-4"><div class="avatar cursor-pointer hover:online" @click="flip = !flip" title="Flip it!"><div class="h-10 rounded-full"><img src=/favicon.ico alt="AI Solve"></div></div><div><a href=https://jiejue.ai/ class="text-lg font-semibold cursor-pointer">AI Solve</a><div class="text-base-content/60 text-sm">Using AI to Serve People</div></div></section><div class="dropdown dropdown-end sm:hidden"><div tabindex=0 role=button class="btn btn-ghost btn-square" aria-label="Select an option"><ion-icon name=menu class=text-2xl></ion-icon></div><ul tabindex=0 class="dropdown-content menu w-36 bg-base-100 rounded-box z-[1] shadow-md"><li><a class="inline-flex items-center p-2 cursor-pointer" href=/index.xml title=RSS><ion-icon name=logo-rss></ion-icon>RSS</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/posts title=Archives><ion-icon name=archive></ion-icon>Archives</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/tags title="All Tags"><ion-icon name=pricetags></ion-icon>All Tags</a></li></ul></div><section class="hidden sm:flex sm:items-center sm:gap-2 md:gap-4"><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=/index.xml title=RSS><ion-icon class=group-hover:text-primary-content name=logo-rss></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=/posts title=Archives><ion-icon class=group-hover:text-primary-content name=archive></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=/tags title="All Tags"><ion-icon class=group-hover:text-primary-content name=pricetags></ion-icon></a></section></div></nav><div class=flip-container :class="{ 'flip-it': flip }"><div class=flipper><div class=front><div class=container><div class="lg:grid lg:grid-cols-4 gap-4 mt-4 px-4"><div class="hidden lg:block"></div><div class=lg:col-span-2><article class="mx-auto prose prose-quoteless dark:prose-invert" id=dream-single-post-main itemscope itemtype=http://schema.org/Article><meta itemprop=name content="Understanding Hard Links and pnpm's Storage Magic Through Real-Life Scenarios"><meta itemprop=description content="Imagine this scenario: You and your roommate share an apartment, and each of you needs a copy of “Professional JavaScript” for studying. Conventionally, you might each buy a copy — this is like traditional file copying. But what if there was a way to share the same book while each having access to it in your own room? That would save money and be convenient, right? This is the concept behind Hard Links.
And pnpm, an increasingly popular package manager, uses similar wisdom to save disk space. Let’s understand this seemingly complex technical concept through this article in a simple way."><meta itemprop=datePublished content="2025-02-16T02:08:22+04:00"><meta itemprop=dateModified content="2025-02-21T10:56:16+05:30"><meta itemprop=wordCount content="694"><header><h1 itemprop=headline>Understanding Hard Links and pnpm's Storage Magic Through Real-Life Scenarios</h1><p class=text-sm><span data-format=luxon>2025-02-16T02:08:22+04:00</span>
| <span>4 minute read</span>
| <span>Updated at
<span data-format=luxon>2025-02-21T10:56:16+05:30</span></span></p><div class="flex justify-between"><div class="flex items-center"><span>@</span>
<span itemprop=author itemscope itemtype=https://schema.org/Person><span itemprop=name>Dong Hao</span></span></div><div class="flex items-center gap-2"><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://x.com/intent/post?text=Understanding%20Hard%20Links%20and%20pnpm%27s%20Storage%20Magic%20Through%20Real-Life%20Scenarios&amp;url=https://jiejue.ai/2025/02/understanding-hard-link-and-pnpm-storage/" target=_blank rel="noopener noreferrer" title="Share on X"><ion-icon class=group-hover:text-primary-content name=logo-x></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://facebook.com/sharer/sharer.php?u=https://jiejue.ai/2025/02/understanding-hard-link-and-pnpm-storage/" target=_blank rel="noopener noreferrer" title="Share on Facebook"><ion-icon class=group-hover:text-primary-content name=logo-facebook></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://wa.me/?text=Understanding%20Hard%20Links%20and%20pnpm%27s%20Storage%20Magic%20Through%20Real-Life%20Scenarios%20https://jiejue.ai/2025/02/understanding-hard-link-and-pnpm-storage/" target=_blank rel="noopener noreferrer" title="Share on WhatsApp"><ion-icon class=group-hover:text-primary-content name=logo-whatsapp></ion-icon></a></div></div></header><section id=dream-single-post-content itemprop=articleBody><img src=https://jiejue.obs.ap-southeast-1.myhuaweicloud.com/20250216020817544.webp alt="Understanding Hard Links and pnpm's Storage Magic Through Real-Life Scenarios"><p>Imagine this scenario: You and your roommate share an apartment, and each of you needs a copy of &ldquo;Professional JavaScript&rdquo; for studying. Conventionally, you might each buy a copy — this is like traditional file copying. But what if there was a way to share the same book while each having access to it in your own room? That would save money and be convenient, right? This is the concept behind Hard Links.</p><p>And pnpm, an increasingly popular package manager, uses similar wisdom to save disk space. Let&rsquo;s understand this seemingly complex technical concept through this article in a simple way.</p><h2 id=hard-links-not-copying-but-creating-avatars>Hard Links: Not Copying, But Creating Avatars</h2><h3 id=what-is-a-hard-link>What is a Hard Link?</h3><p>Imagine you have a family photo:</p><ul><li>If you directly copy this photo, you get two independent files, each taking up the same amount of space</li><li>But if you create a hard link to this photo, it&rsquo;s like putting &ldquo;avatars&rdquo; of the same photo in different albums, where all these &ldquo;avatars&rdquo; point to the same photo</li></ul><pre class=mermaid>graph TB
    A[Original Photo] --> B[inode Node<br>Stores the actual photo data]
    C[Photo Hard Link 1] --> B
    D[Photo Hard Link 2] --> B
    E[Photo Hard Link 3] --> B

    style B fill:#f9f,stroke:#333,stroke-width:4px</pre><p>Characteristics of hard links:</p><ol><li>No extra space: All hard links point to the same actual file content</li><li>Stay synchronized: Changes made through any link are visible through all links</li><li>High security: The file is only truly deleted when the last hard link is removed</li></ol><h3 id=real-life-analogy>Real-Life Analogy</h3><p>It&rsquo;s like:</p><ul><li>A family sharing one TV, with a remote control in each room</li><li>No matter which remote you use to change channels, the TV switches to the same channel</li><li>As long as one remote works, you can control the TV</li><li>The TV (file content) takes up space, while remotes (hard links) take almost no space</li></ul><h2 id=pnpm-the-smart-package-manager>pnpm: The Smart Package Manager</h2><h3 id=how-does-pnpm-use-hard-links>How Does pnpm Use Hard Links?</h3><p>pnpm cleverly uses a combination of hard links and symbolic links (soft links):</p><pre class=mermaid>graph TD
    A[Global Store<br>.pnpm-store] --> B[react@18.2.0]
    A --> C[lodash@4.17.21]
    A --> D[typescript@5.0.0]
    
    subgraph "Project A"
    E[node_modules/.pnpm/react@18.2.0] -.Hard Link.-> B
    F[node_modules/react] -.Symbolic Link.-> E
    end
    
    subgraph "Project B"
    G[node_modules/.pnpm/react@18.2.0] -.Hard Link.-> B
    H[node_modules/react] -.Symbolic Link.-> G
    end

    style A fill:#f9f,stroke:#333,stroke-width:4px</pre><p>How it works:</p><ol><li>Global store: All packages are first installed in a unified location (like a library)</li><li>Hard links: When a project needs a package, it creates hard links to the global store (like borrowing from the library without moving the book)</li><li>Symbolic links: Creates the correct dependency structure (like the library&rsquo;s indexing system)</li></ol><h3 id=practical-benefits>Practical Benefits</h3><p>This design brings several advantages:</p><ol><li>Space Savings</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Traditional way: three projects each install react</span>
</span></span><span style=display:flex><span>projectA/node_modules/react  // takes 5MB
</span></span><span style=display:flex><span>projectB/node_modules/react  // takes 5MB
</span></span><span style=display:flex><span>projectC/node_modules/react  // takes 5MB
</span></span><span style=display:flex><span>Total: 15MB
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># pnpm way</span>
</span></span><span style=display:flex><span>.pnpm-store/react          // takes 5MB
</span></span><span style=display:flex><span>projectA/node_modules/react // almost no space <span style=color:#f92672>(</span>hard link<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>projectB/node_modules/react // almost no space <span style=color:#f92672>(</span>hard link<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>projectC/node_modules/react // almost no space <span style=color:#f92672>(</span>hard link<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Total: about 5MB
</span></span></code></pre></div><ol start=2><li>Fast Installation</li></ol><ul><li>Because multiple projects share the same global store</li><li>If a package is already in the global store, it only needs to create links, no need to download again</li></ul><ol start=3><li>Clear Dependency Structure</li></ol><ul><li>Each project&rsquo;s node_modules structure is clean</li><li>Dependency relationships are easier to understand and manage</li></ul><h2 id=usage-recommendations>Usage Recommendations</h2><ol><li><p>Development Environment Considerations:</p><ul><li>IDEs might show multiple identical files (due to hard links)</li><li>Be careful when modifying dependency packages, as it affects all projects using that package</li></ul></li><li><p>Debugging Tips:</p><ul><li>If you need to temporarily modify a package, better make a copy first instead of modifying directly</li><li>Use <code>pnpm store path</code> to check the global store location</li><li>Use <code>pnpm store prune</code> to clean up unused packages</li></ul></li><li><p>Team Collaboration:</p><ul><li>Recommend the team to use pnpm uniformly, avoid mixing different package managers</li><li>Use <code>.npmrc</code> configuration file in projects to enforce pnpm usage</li></ul></li></ol><h2 id=conclusion>Conclusion</h2><p>Through the clever technology of hard links, pnpm not only saves significant disk space but also provides faster installation speeds and clearer dependency management. Understanding this concept helps you better leverage pnpm&rsquo;s advantages and understand why it&rsquo;s becoming increasingly popular.</p><p>Just like our initial example of sharing books, pnpm allows all projects to intelligently share the same dependencies while ensuring each project can operate independently. This is the beauty of technological innovation!</p></section><div class=divider></div><div class="flex flex-col md:flex-row justify-between gap-4 py-4"><a class="group btn btn-outline" href=/2025/02/extract-json-from-logs/ title="Extracting and Analyzing JSON Messages from Logs"><ion-icon name=chevron-back></ion-icon><div class="inline-flex flex-col items-start"><span class="text-base-content/60 group-hover:text-neutral-content/60 text-xs font-normal">Previous page</span>
<span class="max-w-48 truncate">Extracting and Analyzing JSON Messages from Logs</span></div></a><a class="group btn btn-outline" href=/2025/02/hugo-file-filtering-guide/ title="Hugo Blog System File Filtering Configuration Guide"><div class="inline-flex flex-col items-end"><span class="text-base-content/60 group-hover:text-neutral-content/60 text-xs font-normal">Next page</span>
<span class="max-w-48 truncate">Hugo Blog System File Filtering Configuration Guide</span></div><ion-icon name=chevron-forward></ion-icon></a></div></article></div><div class="hidden lg:flex lg:flex-col lg:items-end"><nav id=TableOfContents><ul><li><a href=#hard-links-not-copying-but-creating-avatars>Hard Links: Not Copying, But Creating Avatars</a><ul><li><a href=#what-is-a-hard-link>What is a Hard Link?</a></li><li><a href=#real-life-analogy>Real-Life Analogy</a></li></ul></li><li><a href=#pnpm-the-smart-package-manager>pnpm: The Smart Package Manager</a><ul><li><a href=#how-does-pnpm-use-hard-links>How Does pnpm Use Hard Links?</a></li><li><a href=#practical-benefits>Practical Benefits</a></li></ul></li><li><a href=#usage-recommendations>Usage Recommendations</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><footer class="flex justify-between items-center gap-2 px-4 py-12"><div><p>© 2025 AI Solve</p><p>Silicon-based Life Kindergarten</p></div><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><section><span id=busuanzi_container_value_site_pv><i class="far fa-eye fa-fw"></i>
Site Total Visits <span id=busuanzi_value_site_pv></span>
</span>&nbsp;|&nbsp;
<span id=busuanzi_container_value_site_uv><i class="fa fa-user"></i>
Site Visitor Count <span id=busuanzi_value_site_uv></span></span></section></span></section></script><div x-data="{ icons: [
    { name: 'moon', status: 'y' },
    { name: 'sunny', status: 'n' },
    { name: 'desktop', status: 'auto' }
  ] }" class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"><template x-for="icon in icons"><div role=button tabindex=0 :aria-label="'Select ' + icon.name + ' mode'" class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary" :class="$store.darkMode.icon() === icon.name && 'bg-primary'" @click=$store.darkMode.toggle(icon.status)><ion-icon :name="`${icon.name}-outline`" class=group-hover:text-primary-content :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"></ion-icon></div></template></div></footer></div></div><div class=back><div class=container><div class="dream-grid dream-grid-about"></div><footer class="flex justify-between items-center gap-2 px-4 py-12"><div><p>© 2025 AI Solve</p><p>Silicon-based Life Kindergarten</p></div><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><section><span id=busuanzi_container_value_site_pv><i class="far fa-eye fa-fw"></i>
Site Total Visits <span id=busuanzi_value_site_pv></span>
</span>&nbsp;|&nbsp;
<span id=busuanzi_container_value_site_uv><i class="fa fa-user"></i>
Site Visitor Count <span id=busuanzi_value_site_uv></span></span></section></span></section></script><div x-data="{ icons: [
    { name: 'moon', status: 'y' },
    { name: 'sunny', status: 'n' },
    { name: 'desktop', status: 'auto' }
  ] }" class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"><template x-for="icon in icons"><div role=button tabindex=0 :aria-label="'Select ' + icon.name + ' mode'" class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary" :class="$store.darkMode.icon() === icon.name && 'bg-primary'" @click=$store.darkMode.toggle(icon.status)><ion-icon :name="`${icon.name}-outline`" class=group-hover:text-primary-content :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"></ion-icon></div></template></div></footer></div></div></div></div><script>window.lightTheme="emerald",window.darkTheme="forest"</script><script src=https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin=anonymous></script><script src=/js/grid.min.js></script><script src=/js/main.min.js></script><script src=https://cdn.jsdelivr.net/npm/luxon@1.26.0 integrity="sha256-4sbTzmCCW9LGrIh5OsN8V5Pfdad1F1MwhLAOyXKnsE0=" crossorigin=anonymous></script><script>format();function format(){document.querySelectorAll('span[data-format="luxon"]').forEach(e=>{const t=e.textContent;e.textContent=luxon.DateTime.fromISO(t,{locale:"en"}).toFormat("yyyy-MM-dd HH:mm")})}</script><script type=module>
      import mediumZoom from 'https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/+esm';
      mediumZoom('#dream-single-post-content img')
    </script><script type=module>
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
      </script><script async src="https://www.googletagmanager.com/gtag/js?id=G-S0KCH9BW4F"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-S0KCH9BW4F")}</script><script type=module src=https://unpkg.com/ionicons@7.4.0/dist/ionicons/ionicons.esm.js></script><script nomodule src=https://unpkg.com/ionicons@7.4.0/dist/ionicons/ionicons.js></script></body></html>